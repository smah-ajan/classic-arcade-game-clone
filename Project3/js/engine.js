var Engine=function(e){function n(){var e=Date.now(),a=(e-l)/1e3;r(a),s(),l=e,p.requestAnimationFrame(n)}function a(){c(),l=Date.now(),n()}function r(e){i(e),o(),player.win()}function i(e){allEnemies.forEach(function(n){n.update(e)}),player.update()}function o(){allEnemies.forEach(function(e){player.x<e.x+60&&player.x+60>e.x&&player.y<e.y+60&&player.y+50>e.y&&(c(),0===chance?prompt("Game Over","Refresh to Start a New Game"):chance--)}),player.x<life.x+55&&player.x+55>life.x&&player.y<life.y+55&&player.y+45>life.y&&(score+=100,life.reset())}function s(){var e,n,a=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"],r=6,i=5;for(e=0;r>e;e++)for(n=0;i>n;n++)m.drawImage(Resources.get(a[e]),101*n,83*e);t()}function t(){allEnemies.forEach(function(e){e.render()}),player.render(),life.render()}function c(){player.reset(),allEnemies.forEach(function(e){e.reset()}),life.reset()}var l,g=e.document,p=e.window,f=g.createElement("canvas"),m=f.getContext("2d");f.width=505,f.height=606,g.body.appendChild(f),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/char-boy.png","images/char-pink-girl.png","images/char-princess-girl.png","images/Heart.png"]),Resources.onReady(a),e.ctx=m}(this);
